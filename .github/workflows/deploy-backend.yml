from typing import Optional

from pydantic import BaseModel, EmailStr


# === Модели токена (нужны для auth и тестов) ===


class Token(BaseModel):
    access_token: str
    token_type: str


class TokenData(BaseModel):
    username: Optional[str] = None


# === Модели пользователя ===


class UserBase(BaseModel):
    username: str
    email: EmailStr


class UserCreate(UserBase):
    """
    Данные, которые приходят при регистрации.
    Дополнены полями анкеты (ФИО, телефон, город, род деятельности и т.д.).
    """

    password: str

    # Дополнительные поля анкеты (все опциональные)
    last_name: Optional[str] = None
    first_name: Optional[str] = None
    middle_name: Optional[str] = None
    birth_year: Optional[int] = None
    phone: Optional[str] = None
    country: Optional[str] = None
    city: Optional[str] = None
    activity: Optional[str] = None


class UserOut(UserBase):
    """
    Ответ с данными пользователя.
    Пока гарантируется id, username, email.
    """

    id: int

    class Config:
        orm_mode = True
