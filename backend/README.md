# LegalAI Backend

## Общая информация

Backend LegalAI работает в боевом режиме.
Демо-заглушки в продакшене отключены.
Каждый запрос пользователя обрабатывается серверной частью
и передаётся в реальный генератор ответов.

---

## Генерация ответов (LLM)

Backend поддерживает два режима генерации ответов:

### 1. GigaChat — боевой режим

Используется, если в окружении заданы корректные переменные:

- GIGACHAT_CLIENT_ID
- GIGACHAT_CLIENT_SECRET
- GIGACHAT_SCOPE

При корректной настройке используется реальная LLM GigaChat.
В логах backend это всегда явно отражается строкой:

GEN=gigachat

---

### 2. Fallback — локальный режим

Если хотя бы одна из переменных GigaChat отсутствует
или указана неверно, backend автоматически переключается
в fallback-режим (локальный генератор).

В логах backend в этом случае будет строка:

GEN=fallback

Fallback-режим является защитным механизмом
и не является демо-режимом.
Он используется только при отсутствии или ошибке конфигурации LLM.

---

## Как проверить, какой генератор используется

Для проверки используемого генератора
нужно посмотреть логи backend-сервиса.

На сервере выполните:

journalctl -u legalai-backend.service -n 100 | grep GEN=

По выводу команды можно однозначно определить,
какой генератор использовался для обработки запросов.

---

## Конфигурация окружения

Шаблон всех поддерживаемых переменных окружения
находится в файле:

backend/.env.example

Файл .env.example:

- не используется приложением напрямую
- не содержит секретов
- служит контрактом конфигурации окружения
  для продакшена, деплоя и сопровождения системы

Фактические значения переменных должны быть заданы
в файле .env или через systemd EnvironmentFile.

