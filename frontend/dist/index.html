<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>LegalAI ‚Äî –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å) -->
    <link rel="stylesheet" href="/css/styles.css" />

    <style>
        :root {
            --bg-light: #e6f2ff;
            --bg-light-elevated: #ffffff;
            --bg-dark: #020617;
            --bg-dark-elevated: #0b1220;
            --accent: #2563eb;
            --accent-soft: #3b82f6;
            --accent-muted: rgba(37, 99, 235, 0.15);
            --danger: #ef4444;
            --success: #22c55e;
            --text-main-light: #0f172a;
            --text-muted-light: #64748b;
            --text-main-dark: #e5e7eb;
            --text-muted-dark: #9ca3af;
            --border-soft-light: rgba(15, 23, 42, 0.08);
            --border-soft-dark: rgba(148, 163, 184, 0.3);
            --shadow-soft: 0 25px 60px rgba(15, 23, 42, 0.22);
            --radius-xl: 18px;
            --radius-2xl: 26px;
            --transition-fast: 0.18s ease-out;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
            "Segoe UI", sans-serif;
            background: radial-gradient(circle at 0% 0%, #eff6ff 0, #e0f2fe 35%, #e6f2ff 100%);
            color: var(--text-main-light);
        }

        body.dark {
            background: radial-gradient(circle at 0% 0%, #020617 0, #020617 60%, #020617 100%);
            color: var(--text-main-dark);
        }

        a {
            color: inherit;
        }

        .shell {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .topbar {
            position: sticky;
            top: 0;
            z-index: 20;
            backdrop-filter: blur(20px);
            background: linear-gradient(to right, rgba(226, 239, 255, 0.92), rgba(219, 234, 254, 0.9));
            border-bottom: 1px solid var(--border-soft-light);
            padding: 10px 18px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        body.dark .topbar {
            background: linear-gradient(to right, rgba(15, 23, 42, 0.94), rgba(15, 23, 42, 0.9));
            border-bottom-color: var(--border-soft-dark);
        }

        .topbar-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-pill {
            width: 36px;
            height: 36px;
            border-radius: 999px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at 30% 20%, #60a5fa 0, #2563eb 35%, #1d4ed8 70%, #0f172a 100%);
            box-shadow: 0 14px 30px rgba(37, 99, 235, 0.6);
            color: white;
            font-weight: 700;
            font-size: 19px;
        }

        .topbar-title {
            display: flex;
            flex-direction: column;
        }

        .topbar-title-main {
            font-weight: 650;
            letter-spacing: 0.03em;
            text-transform: uppercase;
            font-size: 14px;
        }

        .topbar-title-sub {
            font-size: 11px;
            color: var(--text-muted-light);
        }

        body.dark .topbar-title-sub {
            color: var(--text-muted-dark);
        }

        .topbar-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pill {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border-radius: 999px;
            padding: 6px 12px;
            font-size: 11px;
            border: 1px solid var(--border-soft-light);
            background: rgba(255, 255, 255, 0.92);
            color: var(--text-muted-light);
        }

        body.dark .pill {
            border-color: var(--border-soft-dark);
            background: rgba(15, 23, 42, 0.95);
            color: var(--text-muted-dark);
        }

        .status-dot {
            width: 9px;
            height: 9px;
            border-radius: 999px;
            background: var(--success);
            box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.25);
        }

        .status-dot.bad {
            background: var(--danger);
            box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.25);
        }

        .btn {
            border-radius: 999px;
            border: none;
            outline: none;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            padding: 8px 14px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: background var(--transition-fast), color var(--transition-fast),
            transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), var(--accent-soft));
            color: white;
            box-shadow: 0 16px 32px rgba(37, 99, 235, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 20px 42px rgba(37, 99, 235, 0.5);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--border-soft-light);
            color: var(--text-main-light);
        }

        body.dark .btn-outline {
            border-color: var(--border-soft-dark);
            color: var(--text-main-dark);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.12);
        }

        .btn-icon {
            padding: 6px;
            border-radius: 999px;
            width: 30px;
            height: 30px;
            justify-content: center;
        }

        main {
            flex: 1;
        }

        .hero {
            max-width: 1100px;
            margin: 26px auto 16px;
            padding: 0 18px;
            display: grid;
            grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
            gap: 22px;
            align-items: center;
        }

        @media (max-width: 960px) {
            .hero {
                grid-template-columns: 1fr;
                margin-top: 20px;
            }
        }

        .hero-main {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .hero-badge-row {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 11px;
        }

        .hero-badge {
            border-radius: 999px;
            padding: 4px 9px;
            font-size: 11px;
            background: rgba(22, 163, 74, 0.1);
            color: var(--success);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .hero-hint {
            color: var(--text-muted-light);
        }

        body.dark .hero-hint {
            color: var(--text-muted-dark);
        }

        .hero-title {
            font-size: clamp(26px, 3.2vw, 32px);
            font-weight: 760;
            letter-spacing: 0.02em;
        }

        .hero-title span.em {
            background: linear-gradient(135deg, #2563eb, #38bdf8);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .hero-subtitle {
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-muted-light);
        }

        body.dark .hero-subtitle {
            color: var(--text-muted-dark);
        }

        .hero-actions-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 6px;
        }

        .hero-secondary-text {
            font-size: 11px;
            color: var(--text-muted-light);
        }

        body.dark .hero-secondary-text {
            color: var(--text-muted-dark);
        }

        .hero-metrics-row {
            display: flex;
            flex-wrap: wrap;
            gap: 18px;
            margin-top: 10px;
        }

        .metric {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .metric-number {
            font-weight: 700;
            font-size: 16px;
        }

        .metric-label {
            font-size: 11px;
            color: var(--text-muted-light);
        }

        body.dark .metric-label {
            color: var(--text-muted-dark);
        }

        .hero-card {
            border-radius: var(--radius-2xl);
            padding: 16px 16px 18px;
            background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.16), rgba(255, 255, 255, 0.96));
            border: 1px solid var(--border-soft-light);
            box-shadow: var(--shadow-soft);
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        body.dark .hero-card {
            background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.38), rgba(15, 23, 42, 0.98));
            border-color: var(--border-soft-dark);
        }

        .hero-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }

        .hero-card-title-block {
            display: flex;
            flex-direction: column;
        }

        .hero-card-title {
            font-size: 13px;
            font-weight: 600;
        }

        .hero-card-subtitle {
            font-size: 11px;
            color: var(--text-muted-light);
        }

        body.dark .hero-card-subtitle {
            color: var(--text-muted-dark);
        }

        .hero-card-body {
            font-size: 12px;
            color: var(--text-muted-light);
        }

        body.dark .hero-card-body {
            color: var(--text-muted-dark);
        }

        .hero-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-top: 2px;
        }

        .chips-row {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .chip {
            font-size: 10px;
            padding: 3px 7px;
            border-radius: 999px;
            background: rgba(148, 163, 184, 0.16);
            color: var(--text-muted-light);
        }

        body.dark .chip {
            background: rgba(148, 163, 184, 0.22);
            color: var(--text-muted-dark);
        }

        .status-pill-small {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 3px 7px;
            border-radius: 999px;
            font-size: 11px;
            background: rgba(22, 163, 74, 0.08);
            color: var(--success);
        }

        .status-pill-small.error {
            background: rgba(239, 68, 68, 0.08);
            color: var(--danger);
        }

        .status-dot-mini {
            width: 7px;
            height: 7px;
            border-radius: 999px;
            background: currentColor;
        }

        .ai-mini-input {
            width: 100%;
            border-radius: 12px;
            border: 1px solid rgba(148, 163, 184, 0.65);
            padding: 6px 8px;
            font-size: 12px;
            resize: vertical;
            min-height: 40px;
            max-height: 120px;
            font-family: inherit;
            box-sizing: border-box;
            background: rgba(248, 250, 252, 0.95);
        }

        body.dark .ai-mini-input {
            background: rgba(15, 23, 42, 0.9);
            border-color: rgba(148, 163, 184, 0.75);
            color: var(--text-main-dark);
        }

        .ai-mini-output {
            margin-top: 6px;
            padding: 6px 8px;
            border-radius: 10px;
            font-size: 11px;
            line-height: 1.45;
            background: rgba(219, 234, 254, 0.96);
            color: #0f172a;
            max-height: 110px;
            overflow-y: auto;
        }

        body.dark .ai-mini-output {
            background: rgba(30, 64, 175, 0.95);
            color: #e5e7eb;
        }

        .ai-mini-output.empty {
            opacity: 0.75;
            font-style: italic;
        }

        .sections {
            max-width: 1100px;
            margin: 4px auto 18px;
            padding: 0 18px 16px;
            display: grid;
            grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
            gap: 18px;
        }

        @media (max-width: 960px) {
            .sections {
                grid-template-columns: 1fr;
            }
        }

        .section-card {
            border-radius: var(--radius-xl);
            padding: 14px 14px 15px;
            background: rgba(255, 255, 255, 0.96);
            border: 1px solid var(--border-soft-light);
            box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
            font-size: 12px;
        }

        body.dark .section-card {
            background: rgba(15, 23, 42, 0.97);
            border-color: var(--border-soft-dark);
            box-shadow: 0 18px 42px rgba(0, 0, 0, 0.9);
        }

        .section-title {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .section-list {
            list-style: none;
            padding: 0;
            margin: 4px 0 0;
        }

        .section-list li {
            margin-bottom: 4px;
            display: flex;
            gap: 6px;
        }

        .section-list li span.bullet {
            font-size: 12px;
            margin-top: 1px;
        }

        .section-list li span.text {
            font-size: 12px;
        }

        .link-muted {
            color: inherit;
            text-decoration: none;
            border-bottom: 1px dashed rgba(148, 163, 184, 0.7);
        }

        .link-muted:hover {
            border-bottom-style: solid;
        }

        .kbd {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 11px;
            padding: 1px 5px;
            border-radius: 4px;
            border: 1px solid rgba(148, 163, 184, 0.72);
            background: rgba(248, 250, 252, 0.95);
        }

        body.dark .kbd {
            background: rgba(15, 23, 42, 0.94);
        }

        footer {
            max-width: 1100px;
            margin: 0 auto;
            padding: 10px 18px 16px;
            font-size: 11px;
            color: var(--text-muted-light);
            display: flex;
            justify-content: space-between;
            gap: 10px;
            flex-wrap: wrap;
        }

        body.dark footer {
            color: var(--text-muted-dark);
        }
    </style>
</head>
<body>
<div class="shell">
    <!-- TOP BAR -->
    <header class="topbar">
        <div class="topbar-left">
            <div class="logo-pill">L</div>
            <div class="topbar-title">
                <div class="topbar-title-main">LegalAI</div>
                <div class="topbar-title-sub">–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π</div>
            </div>
        </div>
        <div class="topbar-right">
            <div class="pill">
                <span class="status-dot" id="health-dot"></span>
                <span id="health-label">–ü—Ä–æ–≤–µ—Ä—è–µ–º backend‚Ä¶</span>
            </div>
            <button class="btn btn-outline btn-icon" id="theme-toggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                üåì
            </button>
            <button class="btn btn-outline" onclick="window.location.href = '/dashboard';">
                –ü–∞–Ω–µ–ª—å
            </button>
            <button class="btn btn-primary" onclick="window.location.href = '/login';">
                –í–æ–π—Ç–∏
            </button>
        </div>
    </header>

    <!-- HERO -->
    <main>
        <section class="hero">
            <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å -->
            <div class="hero-main">
                <div class="hero-badge-row">
                    <span class="hero-badge">Stage 10 ¬∑ –ø—Ä–æ–¥–∞–∫—à–Ω</span>
                    <span class="hero-hint">backend: <span id="backend-url-label"></span></span>
                </div>
                <h1 class="hero-title">
                    –£–º–Ω—ã–π <span class="em">—é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</span>
                    –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –¥–µ–ª –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π.
                </h1>
                <p class="hero-subtitle">
                    LegalAI –ø–æ–º–æ–≥–∞–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã, –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä—ã, –∏—Å–∫–∞—Ç—å —Å—É–¥–µ–±–Ω—É—é –ø—Ä–∞–∫—Ç–∏–∫—É
                    –∏ –ø–æ–ª—É—á–∞—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–∞–≤–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã.  
                    –í—Å—ë —ç—Ç–æ ‚Äî —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã—Ö –∫–µ–π—Å–æ–≤ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã.
                </p>
                <div class="hero-actions-row">
                    <button class="btn btn-primary" onclick="window.location.href = '/register';">
                        –ù–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ
                    </button>
                    <button class="btn btn-outline" onclick="window.location.href = '/dashboard';">
                        –û—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                    </button>
                </div>
                <div class="hero-actions-row">
                    <span class="hero-secondary-text">
                        –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="/login" class="link-muted">–í–æ–π—Ç–∏</a>.
                    </span>
                </div>
                <div class="hero-metrics-row">
                    <div class="metric">
                        <div class="metric-number">3&nbsp;–º–æ–¥—É–ª—è</div>
                        <div class="metric-label">–î–æ–∫—É–º–µ–Ω—Ç—ã ¬∑ –ò–ò-—á–∞—Ç ¬∑ –°—É–¥–µ–±–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞</div>
                    </div>
                    <div class="metric">
                        <div class="metric-number">24/7</div>
                        <div class="metric-label">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</div>
                    </div>
                    <div class="metric">
                        <div class="metric-number">Stage&nbsp;10</div>
                        <div class="metric-label">–°—Ç–∞–¥–∏—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –∏ UX</div>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –º–∏–Ω–∏-–ø–∞–Ω–µ–ª—å -->
            <div class="hero-card">
                <div class="hero-card-header">
                    <div class="hero-card-title-block">
                        <div class="hero-card-title">–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –ò–ò-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞</div>
                        <div class="hero-card-subtitle">–ú–∏–Ω–∏-–∫–æ–Ω—Å–æ–ª—å –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ /ai/ask (–¥–µ–º–æ)</div>
                    </div>
                    <div id="backend-status-pill" class="status-pill-small">
                        <span class="status-dot-mini"></span>
                        <span id="backend-status-label">–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ</span>
                    </div>
                </div>
                <div class="hero-card-body">
                    <p style="margin-top: 0; margin-bottom: 6px;">
                        –ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ—Å—Ç–æ–π –≤–æ–ø—Ä–æ—Å (–±–µ–∑ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö).
                        –ó–∞–ø—Ä–æ—Å —É–π–¥—ë—Ç –Ω–∞ backend LegalAI –ø–æ –∞–¥—Ä–µ—Å—É <span class="kbd">/ai/ask</span>.
                    </p>
                    <textarea id="ai-query" class="ai-mini-input"
                              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: &quot;–ö–∞–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–±—è–∑–∞–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –æ—Ñ–∏—Å–∞?&quot;"></textarea>
                    <div class="hero-card-footer" style="margin-top: 8px;">
                        <button class="btn btn-outline" type="button" onclick="sendAiAsk()">
                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å
                        </button>
                        <span style="font-size: 10px;">
                            –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å backend –∏ CORS.
                        </span>
                    </div>
                    <div id="ai-answer" class="ai-mini-output empty">
                        –û—Ç–≤–µ—Ç –ò–ò –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.
                    </div>
                </div>
                <div class="hero-card-footer">
                    <div class="chips-row">
                        <span class="chip">FastAPI</span>
                        <span class="chip">OpenAI / –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏</span>
                        <span class="chip">RU / EN</span>
                    </div>
                    <button class="btn btn-outline" type="button" onclick="openSwagger()">
                        –û—Ç–∫—Ä—ã—Ç—å Swagger /docs
                    </button>
                </div>
            </div>
        </section>

        <!-- –ë–ª–æ–∫–∏ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏ -->
        <section class="sections">
            <article class="section-card">
                <div class="section-title">–ß—Ç–æ —É–º–µ–µ—Ç LegalAI</div>
                <ul class="section-list">
                    <li>
                        <span class="bullet">‚öñÔ∏è</span>
                        <span class="text">
                            <strong>–î–æ–∫—É–º–µ–Ω—Ç—ã –∏ —à–∞–±–ª–æ–Ω—ã.</strong> –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–æ–≤, –∞–∫—Ç–æ–≤,
                            –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–µ–π –∏ –¥—Ä—É–≥–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö DOCX/PDF.
                        </span>
                    </li>
                    <li>
                        <span class="bullet">üîç</span>
                        <span class="text">
                            <strong>–ü–æ–∏—Å–∫ —Å—É–¥–µ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏.</strong> –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –ø—Ä–∞–≤–æ–≤—ã—Ö –∞–∫—Ç–æ–≤ –∏ –¥–µ–ª
                            (<span class="kbd">/legal-cases/search</span>).
                        </span>
                    </li>
                    <li>
                        <span class="bullet">ü§ñ</span>
                        <span class="text">
                            <strong>–ò–ò-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç.</strong> –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø–æ –ø—Ä–∞–≤–æ–≤—ã–º –≤–æ–ø—Ä–æ—Å–∞–º, –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞
                            –¥–æ–≥–æ–≤–æ—Ä–æ–≤, —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ (PDF, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞—É–¥–∏–æ).
                        </span>
                    </li>
                    <li>
                        <span class="bullet">üõ°Ô∏è</span>
                        <span class="text">
                            <strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.</strong> –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, JWT, –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è,
                            –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º.
                        </span>
                    </li>
                </ul>
            </article>

            <article class="section-card">
                <div class="section-title">–î–ª—è –∫–æ–≥–æ —ç—Ç–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è</div>
                <ul class="section-list">
                    <li>
                        <span class="bullet">üë®‚Äçüíº</span>
                        <span class="text">
                            –Æ—Ä–∏—Å—Ç—ã –∏ in-house –æ—Ç–¥–µ–ª—ã, –∫–æ—Ç–æ—Ä—ã–º –≤–∞–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
                            –∏ –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ —Ä—É—Ç–∏–Ω—É.
                        </span>
                    </li>
                    <li>
                        <span class="bullet">üè¢</span>
                        <span class="text">
                            –ú–∞–ª—ã–π –∏ —Å—Ä–µ–¥–Ω–∏–π –±–∏–∑–Ω–µ—Å: –¥–æ–≥–æ–≤–æ—Ä—ã —Å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º–∏, —Ç–∏–ø–æ–≤—ã–µ —Ñ–æ—Ä–º—ã, –ø–µ—Ä–≤–∏—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤.
                        </span>
                    </li>
                    <li>
                        <span class="bullet">üåç</span>
                        <span class="text">
                            –ü—Ä–æ–µ–∫—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é, –Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
                            –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –ø–æ–¥ —Å—Ç—Ä–∞–Ω—ã –°–ù–ì, –ï–≤—Ä–æ–ø—É –∏ –¥—Ä—É–≥–∏–µ —Ä–µ–≥–∏–æ–Ω—ã.
                        </span>
                    </li>
                </ul>
                <p style="margin-top: 8px; font-size: 11px; color: inherit;">
                    –í–∞–∂–Ω–æ: LegalAI –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç —é—Ä–∏—Å—Ç–∞ –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–µ–π.
                    –≠—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤.
                </p>
            </article>
        </section>
    </main>

    <!-- FOOTER -->
    <footer>
        <div>
            ¬© <span id="year"></span> LegalAI. –ù–µ —è–≤–ª—è–µ—Ç—Å—è —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–µ–π.
        </div>
        <div>
            Backend: <span class="kbd" id="backend-url-footer"></span> ¬∑
            API: <a href="#" id="swagger-link" class="link-muted" target="_blank" rel="noreferrer">/docs</a> ¬∑
            –ü–∞–Ω–µ–ª—å: <a href="/dashboard" class="link-muted">/dashboard</a>
        </div>
    </footer>
</div>

<script>
    // –¢–µ–º–∞ (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è) ‚Äî –ª–æ–≥–∏–∫–∞ –∫–∞–∫ –≤ dashboard
    (function () {
        const body = document.body;
        const THEME_KEY = 'legalai_theme';

        function applyTheme(theme) {
            if (theme === 'dark') {
                body.classList.add('dark');
            } else {
                body.classList.remove('dark');
            }
        }

        function toggleTheme() {
            const current = body.classList.contains('dark') ? 'dark' : 'light';
            const next = current === 'dark' ? 'light' : 'dark';
            localStorage.setItem(THEME_KEY, next);
            applyTheme(next);
        }

        const savedTheme = localStorage.getItem(THEME_KEY) || 'light';
        applyTheme(savedTheme);

        const toggleBtn = document.getElementById('theme-toggle');
        if (toggleBtn) {
            toggleBtn.addEventListener('click', toggleTheme);
        }
    })();

    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ API_BASE: –ø—Ä–æ–¥–∞–∫—à–Ω vs –ª–æ–∫–∞–ª—å–Ω–æ
    const API_BASE = (function () {
        const host = window.location.hostname;
        if (host.endsWith('legalai.su')) {
            return 'https://api.legalai.su';
        }
        return 'http://127.0.0.1:8000';
    })();

    document.getElementById('backend-url-label').textContent = API_BASE;
    document.getElementById('backend-url-footer').textContent = API_BASE;
    const swaggerLink = document.getElementById('swagger-link');
    if (swaggerLink) {
        swaggerLink.href = API_BASE + '/docs';
    }

    function formatTime(date) {
        return date.toLocaleTimeString('ru-RU', {
            hour: '2-digit',
            minute: '2-digit'
        });
    }

    async function runHealthCheck() {
        const dot = document.getElementById('health-dot');
        const label = document.getElementById('health-label');
        const statusPill = document.getElementById('backend-status-pill');
        const statusLabel = document.getElementById('backend-status-label');

        if (!dot || !label || !statusPill || !statusLabel) return;

        dot.classList.remove('bad');
        statusPill.classList.remove('error');
        label.textContent = '–ü—Ä–æ–≤–µ—Ä—è–µ–º backend‚Ä¶';
        statusLabel.textContent = '–ü—Ä–æ–≤–µ—Ä—è–µ–º‚Ä¶';

        try {
            const res = await fetch(API_BASE + '/health', {
                method: 'GET',
                headers: {
                    'Accept': 'application/json'
                }
            });

            if (!res.ok) {
                dot.classList.add('bad');
                statusPill.classList.add('error');
                label.textContent = '–û—à–∏–±–∫–∞: ' + res.status;
                statusLabel.textContent = '–û—à–∏–±–∫–∞ ' + res.status;
                return;
            }

            let data = null;
            try {
                data = await res.json();
            } catch (e) {}

            dot.classList.remove('bad');
            statusPill.classList.remove('error');
            label.textContent = 'Backend –æ–Ω–ª–∞–π–Ω (' + formatTime(new Date()) + ')';
            statusLabel.textContent = '–†–∞–±–æ—Ç–∞–µ—Ç';

            if (data && (data.status || data.detail)) {
                // –ú–æ–∂–Ω–æ –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –∫—É–¥–∞-—Ç–æ –≤—ã–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç
            }
        } catch (err) {
            dot.classList.add('bad');
            statusPill.classList.add('error');
            label.textContent = 'Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
            statusLabel.textContent = '–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
        }
    }

    function openSwagger() {
        window.open(API_BASE + '/docs', '_blank', 'noopener');
    }

    async function sendAiAsk() {
        const textarea = document.getElementById('ai-query');
        const output = document.getElementById('ai-answer');
        if (!textarea || !output) return;

        const query = (textarea.value || '').trim();
        if (!query) {
            alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.');
            return;
        }

        output.classList.remove('empty');
        output.textContent = '–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å‚Ä¶';

        try {
            const res = await fetch(API_BASE + '/ai/ask', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify({ query: query })
            });

            if (!res.ok) {
                let detail = res.status + ' ' + res.statusText;
                try {
                    const errJson = await res.json();
                    if (errJson && errJson.detail) {
                        detail = errJson.detail;
                    }
                } catch (e) {}

                output.textContent =
                    '–û—à–∏–±–∫–∞ –æ—Ç–≤–µ—Ç–∞ –æ—Ç /ai/ask: ' + detail +
                    '. –í–æ–∑–º–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏–ª–∏ –º–æ–¥—É–ª—å –ò–ò –æ—Ç–∫–ª—é—á—ë–Ω.';
                return;
            }

            let data;
            try {
                data = await res.json();
            } catch (e) {
                output.textContent = '–û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω, –Ω–æ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å JSON.';
                return;
            }

            if (data && (data.answer || data.detail || typeof data === 'string')) {
                const answer = data.answer || data.detail || data.toString();
                output.textContent = answer;
            } else {
                output.textContent = '–û—Ç–≤–µ—Ç –æ—Ç –ò–ò –ø–æ–ª—É—á–µ–Ω, –Ω–æ –≤ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.';
            }
        } catch (err) {
            output.textContent =
                '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ /ai/ask. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å backend –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS.';
        }
    }

    document.getElementById('year').textContent = new Date().getFullYear();
    runHealthCheck();
</script>
</body>
</html>
