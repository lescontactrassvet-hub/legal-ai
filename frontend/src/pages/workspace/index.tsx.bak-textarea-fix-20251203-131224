import React, { useState, useRef, useEffect } from "react";
import { DocumentEditor } from "../../components/DocumentEditor";

type WorkspacePageProps = {
  onGoToProfile: () => void;
  onLogout: () => void;
};

type WorkspaceMode = "simple" | "pro";

type ChatMessage = {
  from: "user" | "ai";
  text: string;
};

/** –∫–∞–∫–æ–π –±–æ–∫–æ–≤–æ–π –±–ª–æ–∫ –∞–∫—Ç–∏–≤–µ–Ω: –¥–µ–ª–∞ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã */
type SidePanel = "cases" | "docs";

export function WorkspacePage({ onGoToProfile, onLogout }: WorkspacePageProps) {
  const currentYear = new Date().getFullYear();

  const [mode, setMode] = useState<WorkspaceMode>("simple");
  const [messages, setMessages] = useState<ChatMessage[]>([]);
  const [input, setInput] = useState("");
  const [activeSidePanel, setActiveSidePanel] = useState<SidePanel>("cases");
  const [documentHtml, setDocumentHtml] = useState<string>("");
  const messagesEndRef = useRef<HTMLDivElement | null>(null);
  const chatInputRef = useRef<HTMLTextAreaElement | null>(null);

  function getTatianaDemoReply(mode: WorkspaceMode, userText: string): string {
    return mode === "simple"
      ? "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –æ–ø–∏—Å–∞–ª–∏ —Å–∏—Ç—É–∞—Ü–∏—é. –í –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ —è —Ñ–∏–∫—Å–∏—Ä—É—é —Ç–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤, —á—Ç–æ–±—ã –ª—É—á—à–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±—É–¥—É—â—É—é —Ä–∞–±–æ—Ç—É –¢–∞—Ç—å—è–Ω—ã."
      : "–ü—Ä–∏–Ω—è–ª–∞ –∑–∞–ø—Ä–æ—Å. –í –¥–∞–ª—å–Ω–µ–π—à–µ–º –ò–ò –¢–∞—Ç—å—è–Ω–∞ –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑, –ø–æ–¥–±–∏—Ä–∞—Ç—å –Ω–æ—Ä–º—ã –ø—Ä–∞–≤–∞ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.";
  }

  async function requestTatianaReply(mode: WorkspaceMode, userText: string): Promise<string> {
    // TODO: –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ API –¢–∞—Ç—å—è–Ω—ã (backend)
    return getTatianaDemoReply(mode, userText);
  }

  async function handleSend() {
    const text = input.trim();
    if (!text) return;

    const userMsg: ChatMessage = { from: "user", text };
    setMessages((prev) => [...prev, userMsg]);
    setInput("");

    const aiText = await requestTatianaReply(mode, text);

    const aiMsg: ChatMessage = {
      from: "ai",
      text: aiText,
    };

    setMessages((prev) => [...prev, aiMsg]);
  }

  function handleInputChange(event: React.ChangeEvent<HTMLTextAreaElement>) {
    const el = event.target;
    setInput(el.value);

    if (chatInputRef.current) {
      const textarea = chatInputRef.current;
      textarea.style.height = "auto";
      const maxHeight = 4 * 24; // –ø—Ä–∏–º–µ—Ä–Ω–æ 4 —Å—Ç—Ä–æ–∫–∏
      const newHeight = Math.min(textarea.scrollHeight, maxHeight);
      textarea.style.height = newHeight + "px";
    }
  }

  function handleInputKeyDown(event: React.KeyboardEvent<HTMLTextAreaElement>) {
    if (event.key === "Enter") {
      event.preventDefault();
      handleSend();
    }
  }

  function handleFileChange(event: React.ChangeEvent<HTMLInputElement>) {
    const files = event.target.files;
    if (!files || files.length === 0) return;

    // –ó–¥–µ—Å—å –ø–æ–∑–∂–µ –¥–æ–±–∞–≤–∏–º –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–∏–≤—è–∑–∫—É –∫ –¥–µ–ª—É
    console.log("–í—ã–±—Ä–∞–Ω–æ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –¢–∞—Ç—å—è–Ω—ã:", files.length);
  }

  /** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ HTML-–¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ */
  function handleDocumentChange(value: string) {
    setDocumentHtml(value);
  }

  useEffect(() => {
    if (messagesEndRef.current) {
      messagesEndRef.current.scrollIntoView({ behavior: "smooth" });
    }
  }, [messages]);

  /** –í—Å—Ç–∞–≤–∏—Ç—å —á–µ—Ä–Ω–æ–≤–æ–π —à–∞–±–ª–æ–Ω (–∫–∞–∫ –±—É–¥—Ç–æ –¢–∞—Ç—å—è–Ω–∞ –≤—ã–¥–∞–ª–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç) */
  function handleInsertDraftTemplate() {
    if (documentHtml.trim()) return;

    const template = `
      <h2>–ß–µ—Ä–Ω–æ–≤–æ–π –ø—Ä–æ–µ–∫—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞.</h2>
      <ol>
        <li><strong>–í–≤–æ–¥–Ω–∞—è —á–∞—Å—Ç—å:</strong> –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∞—à–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏.</li>
        <li><strong>–û—Å–Ω–æ–≤–Ω—ã–µ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞:</strong> –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç—ã –ø–æ –¥–µ–ª—É.</li>
        <li><strong>–ü—Ä–∞–≤–æ–≤–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:</strong> —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–æ—Ä–º—ã –ø—Ä–∞–≤–∞ (–±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¢–∞—Ç—å—è–Ω–æ–π).</li>
        <li><strong>–ü—Ä–æ—Å—å–±–∞ / —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ:</strong> —á–µ–≥–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∏—Ç—å—Å—è.</li>
      </ol>
      <p>–î–∞–ª—å—à–µ –≤—ã –º–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç —Å–∞–º–∏ –∏–ª–∏ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ò–ò –¢–∞—Ç—å—è–Ω—É –≤ —á–∞—Ç–µ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏.</p>
    `;
    setDocumentHtml(template);
  }

  /** –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –∑–∞–≥–ª—É—à–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äî –ø–æ–∑–∂–µ —É–π–¥—ë—Ç –≤ —Ä–∞–∑–¥–µ–ª "–î–æ–∫—É–º–µ–Ω—Ç—ã" */
  function handleSaveDraft() {
    console.log(
      "–°–æ—Ö—Ä–∞–Ω—ë–Ω —á–µ—Ä–Ω–æ–≤–∏–∫ HTML-–¥–æ–∫—É–º–µ–Ω—Ç–∞ (–¥–µ–º–æ):",
      documentHtml.length,
      "—Å–∏–º–≤–æ–ª–æ–≤"
    );
    alert(
      "–í –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ. –í —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏ –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–î–æ–∫—É–º–µ–Ω—Ç—ã¬ª –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç."
    );
  }

  /** –ó–∞–≥–ª—É—à–∫–∏ –ø–æ–¥ –±—É–¥—É—â–∏–π —ç–∫—Å–ø–æ—Ä—Ç –≤ Word / PDF */
  function handleDownloadStub(format: "pdf" | "docx") {
    alert(
      `–≠–∫—Å–ø–æ—Ä—Ç –≤ ${format.toUpperCase()} –ø–æ—è–≤–∏—Ç—Å—è, –∫–æ–≥–¥–∞ –ø–æ–¥–∫–ª—é—á–∏–º –º–æ–¥—É–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.`
    );
  }

  return (
    <div className="workspace-page">
      {/* –®–ê–ü–ö–ê */}
      <header className="workspace-header">
        <div className="workspace-header-inner">
          {/* –õ–û–ì–û–¢–ò–ü + –ù–ê–ó–í–ê–ù–ò–ï */}
          <div className="workspace-logo-block">
            <img src="/logo.png" alt="Logo" className="workspace-logo" />
            <div className="workspace-logo-text">
              <div className="workspace-title">LEGALAI</div>
              <div className="workspace-subtitle">
                –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –ò–ò ‚Äî –¢–∞—Ç—å—è–Ω–∞
              </div>
            </div>
          </div>

          {/* –ú–ï–ù–Æ –°–ü–†–ê–í–ê */}
          <div className="workspace-menu">
            <button className="auth-primary-button">–ß–∞—Ç –ò–ò ‚Äú–¢–∞—Ç—å—è–Ω–∞‚Äù</button>
            <button className="auth-primary-button">–î–æ–∫—É–º–µ–Ω—Ç—ã</button>
            <button className="auth-primary-button" onClick={onGoToProfile}>
              –ü—Ä–æ—Ñ–∏–ª—å
            </button>
            <button className="auth-primary-button" onClick={onLogout}>
              –í—ã–π—Ç–∏
            </button>
          </div>
        </div>
      </header>

      {/* –†–ê–ë–û–ß–ò–ô –¶–ï–ù–¢–† ‚Äî —á–∞—Ç —Å–ª–µ–≤–∞, –¥–≤–∞ –±–ª–æ–∫–∞ —Å–ø—Ä–∞–≤–∞ */}
      <main className="workspace-main">
        {/* –õ–ï–í–ê–Ø –ß–ê–°–¢–¨ ‚Äî –ß–∞—Ç –¢–∞—Ç—å—è–Ω–∞ (2/3 —à–∏—Ä–∏–Ω—ã) */}
        <div className="workspace-main-left">
          <h2 className="workspace-section-title">–ß–∞—Ç –ò–ò ‚Äú–¢–∞—Ç—å—è–Ω–∞‚Äù</h2>

          {/* –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –†–ï–ñ–ò–ú–û–í */}
          <div className="workspace-mode-toggle">
            <button
              type="button"
              className={
                mode === "simple"
                  ? "workspace-mode-button workspace-mode-button-active"
                  : "workspace-mode-button"
              }
              onClick={() => setMode("simple")}
            >
              –ü—Ä–æ—Å—Ç–æ–π —Ä–µ–∂–∏–º
            </button>
            <button
              type="button"
              className={
                mode === "pro"
                  ? "workspace-mode-button workspace-mode-button-active"
                  : "workspace-mode-button"
              }
              onClick={() => setMode("pro")}
            >
              –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º
            </button>
          </div>

          {/* –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ + –ø–æ–¥—Å–∫–∞–∑–∫–∞ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —á–∞—Ç–æ–º */}
          <p className="workspace-placeholder">
            {mode === "simple"
              ? "–í –ø—Ä–æ—Å—Ç–æ–º —Ä–µ–∂–∏–º–µ –¢–∞—Ç—å—è–Ω–∞ –æ–±—ä—è—Å–Ω—è–µ—Ç –≤—Å—ë —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º —è–∑—ã–∫–æ–º, –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤."
              : "–í –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–æ—Ä–º—ã –ø—Ä–∞–≤–∞."}
          </p>
          <p className="workspace-chat-tip">
            –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —á–∞—Ç–æ–º: 1) –∫—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ –≤–∞—à—É —Å–∏—Ç—É–∞—Ü–∏—é, 2) –ø—Ä–∏
            –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª—ã (–¥–æ–≥–æ–≤–æ—Ä—ã, —Ñ–æ—Ç–æ, —Å–∫–∞–Ω—ã), 3) –∑–∞–¥–∞–≤–∞–π—Ç–µ
            —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —à–∞–≥–æ–≤, –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –∏–ª–∏
            —á–µ—Ä–Ω–æ–≤–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞.
          </p>

          {/* –û–ë–õ–ê–°–¢–¨ –ß–ê–¢–ê */}
          <div className="workspace-chat-box">
            {messages.length === 0 ? (
              <div className="workspace-chat-empty">
                –ù–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥ ‚Äî –æ–ø–∏—à–∏—Ç–µ —Å–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏. –°–µ–π—á–∞—Å
                —ç—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º –±–µ–∑ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º, –Ω–æ —Å—Ç–∏–ª—å –∏
                –ª–æ–≥–∏–∫–∞ –æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç —Ç–∞–∫–∏–º–∏ –∂–µ, –∫–æ–≥–¥–∞ –ø–æ–¥–∫–ª—é—á–∏–º –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π
                —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –ò–ò ‚Äú–¢–∞—Ç—å—è–Ω–∞‚Äù.
              </div>
            ) : (
              <div className="workspace-chat-messages">
                {messages.map((msg, index) => (
                  <div
                    key={index}
                    className={
                      msg.from === "user"
                        ? "workspace-chat-message workspace-chat-message-user"
                        : "workspace-chat-message workspace-chat-message-ai"
                    }
                  >
                    <div className="workspace-chat-author">
                      {msg.from === "user" ? "–í—ã" : "–¢–∞—Ç—å—è–Ω–∞"}
                    </div>
                    <div className="workspace-chat-bubble">{msg.text}</div>
                  </div>
                ))}
                <div ref={messagesEndRef} />
              </div>
            )}

            {/* –í–í–û–î –°–û–û–ë–©–ï–ù–ò–Ø + –ö–ù–û–ü–ö–ò */}
            <div className="workspace-chat-input-row">
              <label
                className="workspace-chat-file-button"
                title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"
              >
                üìé
                <input
                  type="file"
                  multiple
                  className="workspace-chat-file-input"
                  accept=".doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf,image/*,audio/*"
                  onChange={handleFileChange}
                />
              </label>

              <textarea className="workspace-chat-input"
  rows="4"
  style={{ resize: "none" }}
  placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É —Å–∏—Ç—É–∞—Ü–∏—é –∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å"
  value={input}
  onChange={(e) => setInput(e.target.value)}
  onKeyDown={handleInputKeyDown}
></textarea> setInput(e.target.value)}
      onKeyDown={handleInputKeyDown}
    />
              <button
                type="button"
                className="workspace-chat-send-button"
                onClick={handleSend}
              >
                ‚û§
              </button>
            </div>
          </div>
        </div>

        {/* –ü–†–ê–í–ê–Ø –ß–ê–°–¢–¨ ‚Äî –¥–≤–∞ –±–æ–∫–æ–≤—ã—Ö –±–ª–æ–∫–∞ –æ–¥–∏–Ω –ø–æ–¥ –¥—Ä—É–≥–∏–º */}
        <div className="workspace-main-right">
          {/* –ë–ª–æ–∫ 1: –ú–æ–∏ –¥–µ–ª–∞ */}
          <section
            className={
              "workspace-side-panel" +
              (activeSidePanel === "cases"
                ? " workspace-side-panel-active"
                : " workspace-side-panel-collapsed")
            }
          >
            <div
              className="workspace-side-panel-header"
              onClick={() => setActiveSidePanel("cases")}
            >
              <h2 className="workspace-section-title">–ú–æ–∏ –¥–µ–ª–∞</h2>
              <span className="workspace-side-panel-toggle">
                {activeSidePanel === "cases" ? "–°–≤–µ—Ä–Ω—É—Ç—å" : "–û—Ç–∫—Ä—ã—Ç—å"}
              </span>
            </div>
            {activeSidePanel === "cases" && (
              <p className="workspace-placeholder">
                –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –¥–µ–ª –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É.
                –°–µ–π—á–∞—Å —ç—Ç–æ –º–∞–∫–µ—Ç –±–µ–∑ –ª–æ–≥–∏–∫–∏.
              </p>
            )}
          </section>

          {/* –ë–ª–æ–∫ 2: –î–æ–∫—É–º–µ–Ω—Ç—ã */}
          <section
            className={
              "workspace-side-panel" +
              (activeSidePanel === "docs"
                ? " workspace-side-panel-active"
                : " workspace-side-panel-collapsed")
            }
          >
            <div
              className="workspace-side-panel-header"
              onClick={() => setActiveSidePanel("docs")}
            >
              <h2 className="workspace-section-title">–î–æ–∫—É–º–µ–Ω—Ç—ã</h2>
              <span className="workspace-side-panel-toggle">
                {activeSidePanel === "docs" ? "–°–≤–µ—Ä–Ω—É—Ç—å" : "–û—Ç–∫—Ä—ã—Ç—å"}
              </span>
            </div>
            {activeSidePanel === "docs" && (
              <p className="workspace-placeholder">
                –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –¥–µ–ª—É: —á–µ—Ä–Ω–æ–≤–∏–∫–∏,
                —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∏ –≤–ª–æ–∂–µ–Ω–∏—è. –ü–æ–∫–∞ —ç—Ç–æ –º–∞–∫–µ—Ç –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö.
              </p>
            )}
          </section>
        </div>
      </main>

            {/* –†–ï–î–ê–ö–¢–û–† –î–û–ö–£–ú–ï–ù–¢–ê */}
      <section className="workspace-editor">
        <div className="workspace-editor-header">
          <h2 className="workspace-section-title workspace-editor-title">
            –†–µ–¥–∞–∫—Ç–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞
          </h2>
          <p className="workspace-editor-subtitle">
            –ó–¥–µ—Å—å –¢–∞—Ç—å—è–Ω–∞ –±—É–¥–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç—ã –≤ –≤–∏–¥–µ
            –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞. –í—Å–µ –ø—Ä–æ—Å—å–±—ã –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤—ã —Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ—Ç–µ –≤
            —á–∞—Ç–µ —Å–≤–µ—Ä—Ö—É, –∞ –≥–æ—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∑–¥–µ—Å—å ‚Äî –∫–∞–∫ –º–∏–Ω–∏-Word,
            –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é.
          </p>
        </div>

        <DocumentEditor
          value={documentHtml}
          onChange={handleDocumentChange}
        />

        <div className="workspace-editor-actions">
          <button
            type="button"
            className="workspace-editor-button"
            onClick={handleInsertDraftTemplate}
          >
            –í—Å—Ç–∞–≤–∏—Ç—å —á–µ—Ä–Ω–æ–≤–æ–π —à–∞–±–ª–æ–Ω
          </button>
          <button
            type="button"
            className="workspace-editor-button workspace-editor-button-secondary"
            onClick={handleSaveDraft}
          >
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
          </button>
          <button
            type="button"
            className="workspace-editor-button workspace-editor-button-ghost"
            onClick={() => handleDownloadStub("docx")}
          >
            –°–∫–∞—á–∞—Ç—å –≤ Word (—Å–∫–æ—Ä–æ)
          </button>
          <button
            type="button"
            className="workspace-editor-button workspace-editor-button-ghost"
            onClick={() => handleDownloadStub("pdf")}
          >
            –°–∫–∞—á–∞—Ç—å PDF (—Å–∫–æ—Ä–æ)
          </button>
        </div>
      </section>

      {/* –§–£–¢–ï–† */}
      <footer className="workspace-footer">
        <p className="workspace-footer-text">
          ¬© {currentYear} –ü—Ä–æ–µ–∫—Ç LegalAI. –í—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Å–µ—Ä–≤–∏—Å –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ
          –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ë–µ—Ä–µ—Å–∫—É –ù. –ó–∞—â–∏—â–µ–Ω–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –†–§ –∏
          –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º –ø—Ä–∞–≤–æ–º.
        </p>
      </footer>
    </div>
  );
}

